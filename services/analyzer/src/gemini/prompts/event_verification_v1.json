{
  "version": "event_verification_v1",
  "task": "Verify a specific event detected at a given timestamp in the soccer match video",
  "instructions": "# イベント検証タスク\n\nあなたは、サッカーの試合動画で検出されたイベントを検証する専門家です。指定されたタイムスタンプ（前後2秒の範囲）で、特定のイベントが実際に発生したか確認してください。\n\n## 検証対象\n\n- イベントタイプ（pass、carry、turnover、shot、set_pieceなど）\n- 実行チーム（home/away）\n- 実行選手（背番号）\n- イベントの詳細情報\n\n## 検証基準\n\n### パス (pass)\n- 蹴り手から受け手へのボール移動が明確に見えるか\n- 意図的なパスか、それともクリアランスやデフレクションか\n- 受け手が実際にボールを受け取ったか（成功パス）、受け取れなかったか（失敗パス）\n\n### キャリー (carry)\n- 選手がボールを保持して継続的に移動しているか\n- 少なくとも2-3メートル以上の移動があるか\n- ドリブル、ランニング、ボールキープなど\n\n### ターンオーバー (turnover)\n- ボール所持権が一方のチームから他方に変わる瞬間が見えるか\n- インターセプト、タックル、奪取、ルーズボールの獲得など\n- 単なるパス失敗ではなく、相手チームが明確にボールを獲得したか\n\n### シュート (shot)\n- ゴール方向への明確な攻撃的なシュート動作が見えるか\n- ゴールに向かっているか（オフターゲットでもシュートとカウント）\n- クロスやクリアランスと区別できるか\n\n### セットピース (set_piece)\n- フリーキック、コーナーキック、スローイン、ゴールキックなど構造化されたリスタートが見えるか\n- レフェリーの笛や、選手がボールを静止させて準備する様子\n\n## 信頼度の再評価\n\n検証後、イベントの信頼度を以下の基準で再評価してください：\n\n- **0.9-1.0**: 明確に確認できる。カメラアングルが良く、プレイヤーとボールがはっきり見える\n- **0.7-0.9**: 高い確率で正しい。一部が見えにくいが、文脈から判断できる\n- **0.5-0.7**: 可能性はあるが不確実。カメラの死角、遠距離、または複雑なプレイ\n- **0.0-0.5**: イベントは発生していない、または完全に異なるイベント\n\n## 修正の指示\n\nイベント情報に誤りがある場合、`corrections` オブジェクトで修正内容を指定してください：\n\n- **type**: イベントタイプが間違っている場合、正しいタイプ（例: \"pass\" → \"carry\"）\n- **team**: チームが間違っている場合、正しいチーム（\"home\" または \"away\"）\n- **player**: 選手の背番号が特定できる、または修正が必要な場合（例: \"#10\" → \"#8\"）\n- **details**: その他の詳細情報の修正（例: パスの成功/失敗、シュートの結果など）\n\n修正が不要な項目は `null` を返してください。\n\n## reasoning の記載\n\n検証判断の根拠を1-2文で簡潔に記載してください。何を見て、どう判断したかを具体的に説明してください。\n\n### 良い例\n- \"タイムスタンプ12.5秒で#10がボールを蹴り、#7が受け取る動作が明確に確認できた。パスは成功している。\"\n- \"44.8秒付近で#8（#10ではなく）がミディアムパスを出し、#14が受け取る動作を確認。パス自体は明確に発生している。\"\n- \"指定された時刻にパス動作は見られず、#5がボールを保持してドリブルしている。イベントタイプをcarryに修正すべき。\"\n- \"カメラが遠く、選手の背番号が判別できないが、ホームチームの選手がシュートを打つ動作は確認できる。\"\n\n### 悪い例\n- \"イベントが発生している\" （具体性がない）\n- \"おそらく正しい\" （根拠が不明確）\n- \"問題なし\" （何を確認したか不明）\n\n## 出力形式\n\nJSON形式で以下の構造を返してください：\n\n```json\n{\n  \"verified\": true/false,\n  \"confidence\": 0.0-1.0,\n  \"corrections\": {\n    \"type\": \"修正後のイベントタイプ\" | null,\n    \"team\": \"home\" | \"away\" | null,\n    \"player\": \"#背番号\" | null,\n    \"details\": { \"追加の修正情報\" } | null\n  },\n  \"reasoning\": \"検証判断の根拠を1-2文で\"\n}\n```",
  "output_schema": {
    "type": "object",
    "properties": {
      "verified": {
        "type": "boolean",
        "description": "Whether the event was confirmed to have occurred at the specified timestamp"
      },
      "confidence": {
        "type": "number",
        "description": "Confidence score between 0.0 and 1.0 after verification",
        "minimum": 0.0,
        "maximum": 1.0
      },
      "corrections": {
        "type": "object",
        "properties": {
          "type": {
            "type": ["string", "null"],
            "description": "Corrected event type if the original was incorrect (e.g., 'pass', 'carry', 'turnover', 'shot', 'set_piece')"
          },
          "team": {
            "type": ["string", "null"],
            "description": "Corrected team if the original was incorrect ('home' or 'away')"
          },
          "player": {
            "type": ["string", "null"],
            "description": "Corrected or identified player jersey number (e.g., '#10')"
          },
          "details": {
            "type": ["object", "null"],
            "description": "Additional corrections or details about the event"
          }
        },
        "required": ["type", "team", "player", "details"]
      },
      "reasoning": {
        "type": "string",
        "description": "Brief 1-2 sentence explanation of the verification decision, describing what was observed in the video"
      }
    },
    "required": ["verified", "confidence", "corrections", "reasoning"]
  },
  "examples": [
    {
      "input": {
        "timestamp": 45.3,
        "event_type": "pass",
        "team": "home",
        "player": "#10",
        "original_confidence": 0.62
      },
      "output": {
        "verified": true,
        "confidence": 0.85,
        "corrections": {
          "type": null,
          "team": null,
          "player": "#8",
          "details": null
        },
        "reasoning": "44.8秒付近で#8（#10ではなく）がミディアムパスを出し、#14が受け取る動作を確認。パス自体は明確に発生している。"
      }
    },
    {
      "input": {
        "timestamp": 120.5,
        "event_type": "pass",
        "team": "away",
        "player": "#7",
        "original_confidence": 0.58
      },
      "output": {
        "verified": true,
        "confidence": 0.75,
        "corrections": {
          "type": "carry",
          "team": null,
          "player": null,
          "details": {
            "note": "Not a pass, player carried the ball forward"
          }
        },
        "reasoning": "指定された時刻にパス動作は見られず、#7がボールを保持してドリブルしている。イベントタイプをcarryに修正すべき。"
      }
    },
    {
      "input": {
        "timestamp": 89.2,
        "event_type": "shot",
        "team": "home",
        "player": "#9",
        "original_confidence": 0.71
      },
      "output": {
        "verified": true,
        "confidence": 0.92,
        "corrections": {
          "type": null,
          "team": null,
          "player": null,
          "details": null
        },
        "reasoning": "89.1秒で#9がペナルティエリア内からゴール方向へ明確なシュートを打つ動作を確認。ゴールキーパーがセーブしている。"
      }
    },
    {
      "input": {
        "timestamp": 67.8,
        "event_type": "turnover",
        "team": "away",
        "player": "#3",
        "original_confidence": 0.65
      },
      "output": {
        "verified": false,
        "confidence": 0.3,
        "corrections": {
          "type": null,
          "team": null,
          "player": null,
          "details": null
        },
        "reasoning": "指定された時刻の前後2秒を確認したが、明確なターンオーバーの瞬間は見られない。カメラの死角でプレイが発生した可能性がある。"
      }
    }
  ]
}
